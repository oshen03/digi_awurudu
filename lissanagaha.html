<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lissana Gahe Nagima</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background-color: #87CEEB;
      font-family: Arial, sans-serif;
      touch-action: manipulation;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .game-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      height: 80vh;
      background-color: transparent;
    }

    .pole {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      height: 100%;
      z-index: 1;
    }

    .pole img {
      height: 100%;
      width: auto;
    }

    .player {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      bottom: 20px;
      z-index: 2;
    }

    .player img {
      width: 100%;
      height: auto;
    }

    .climb-button {
      margin-top: 20px;
      padding: 20px 40px;
      font-size: 20px;
      background-color: #4CAF50;
      border: none;
      border-radius: 15px;
      cursor: pointer;
    }

    .climb-button:active {
      background-color: #45a049;
    }

    .copyright {
      position: absolute;
      bottom: 10px;
      color: #666;
      font-size: 12px;
    }

    .modal-content {
      text-align: center;
      background: #fff9e6;
      border-radius: 15px;
      padding: 30px;
    }

    .modal-content h2 {
      color: #d2691e;
      font-weight: bold;
    }

    .modal-content p {
      font-size: 18px;
    }
  </style>
</head>

<body>
  <div class="container text-center">
    <div class="game-container mx-auto">
      <div class="pole">
        <img src="assets/pole.svg" alt="Pole" />
      </div>
      <div class="player">
        <img src="assets/climber.svg" alt="Climber" />
      </div>
    </div>

    <button class="climb-button" id="climbBtn">CLIMB UP</button>
  </div>

  <!-- Modals -->
  <div class="modal fade" id="alertModal" tabindex="-1" aria-labelledby="alertModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-danger text-white">
          <h5 class="modal-title" id="alertModalLabel">Oops!</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          You slid all the way down! Try again!
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="resetGame()">Play Again</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="winModal" tabindex="-1" aria-labelledby="winModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <h2 class="mb-3">ðŸŽ‰ Congratulations! ðŸŽ‰</h2>
        <p>You reached the flag and won the game!</p>
        <button class="btn btn-success" onclick="resetGame()" data-bs-dismiss="modal">Play Again</button>
      </div>
    </div>
  </div>

  <div class="copyright">Copyright Â© Lotus Technologies (Private) Limited. All Rights Reserved.</div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const player = document.querySelector('.player');
    const climbBtn = document.getElementById('climbBtn');
    const pole = document.querySelector('.pole img');

    let gameActive = true;
    let gravity = 0.2;
    let climbPower = 5;
    let playerPosition = 20;
    let flagPositionY = 80;
    let playerHeight = 0;
    const updateInterval = 50;

    // Initialize player height after image loads
    document.querySelector('.player img').onload = function() {
      playerHeight = player.clientHeight;
    };

    function updatePlayerPosition() {
      if (!gameActive) return;

      playerPosition -= gravity;
      player.style.bottom = `${playerPosition}px`;

      const poleHeight = pole.clientHeight;
      const playerTopFromTop = poleHeight - (playerPosition + playerHeight);

      // Win condition check
      if (playerTopFromTop >= flagPositionY) {
        winGame();
      }

      // Lose condition check
      if (playerPosition <= 0) {
        gameActive = false;
        new bootstrap.Modal(document.getElementById('alertModal')).show();
      }
    }

    function climb() {
      if (gameActive) {
        playerPosition += climbPower;
        player.style.bottom = `${playerPosition}px`;
      }
    }

    function winGame() {
      gameActive = false;
      new bootstrap.Modal(document.getElementById('winModal')).show();
    }

    function resetGame() {
      playerPosition = 20;
      gameActive = true;
      player.style.bottom = '20px';
    }

    // Event listeners
    climbBtn.addEventListener('mousedown', climb);
    climbBtn.addEventListener('touchstart', (e) => {
      e.preventDefault();
      climb();
    });

    // Game loop
    setInterval(updatePlayerPosition, updateInterval);
  </script>
</body>
</html>